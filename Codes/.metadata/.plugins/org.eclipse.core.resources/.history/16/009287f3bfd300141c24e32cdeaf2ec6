$(document).ajaxStart(function() {
		$(".wait").css("display", "block");
	});

	$(document).ready(
			function() {
				/** Context menu **/
				context.init({
					preventDoubleContext : false
				});

				context.settings({
					compress : true
				});
				var listServer = $('.server-listed');
				function check_server(index) {
					if (!listServer[index]) {
						return false;
					}
					var data = $(listServer[index]).attr('data-id');
					$.ajax(
							{
								url : 'checkstatus/' + data + '/' + cc,
								type : 'GET',
								data : {},
								timeout : '30000',
								success : function(data, status) {
									data = $.trim(data);
									$(listServer[index]).find(".wait").css(
											"display", "none");
									if (data == 'false') {
										$(listServer[index]).find(
												".i-server-icon").remove;
										$(listServer[index]).find(
												".i-server-icon-off").css({
											"display" : "block"
										});
									} else {
										$(listServer[index]).find(
												".i-server-icon-off").remove;
										$(listServer[index]).find(
												".i-server-icon").css({
											"display" : "block"
										});
										$(listServer[index]).find(".disabled")
												.removeClass("disabled");
									}
								}
							}).always(function() {
						check_server(++index);
						
					});
					
					

					context.attach('.content', [ {
						header : 'MENU'
					}, {
						text : 'Add Server',
						action : function(e) {
							e.preventDefault();
							$('#AddServer').modal('show');
						}
					}, {
						text : 'Reload',
						action : function(e) {
							location.reload();
						}
					}, {
						text : 'Donate',
						action : function(e) {
							e.preventDefault();
							$('#donate').submit();
						}
					} ]);
					context.attach('.server-listed', [{
						header : 'ACTION..'
					}, {
						text : 'Edit Server',
						href : ctx+'/editserver/'+data+'/'+cc
					},{
						text : 'Remove Server',
						href : ctx+'/removeserver/'+data+'/'+cc
					}]);
					context.init({
						fadeSpeed : 100, // The speed in which the context menu fades in (in
						// milliseconds)
						filter : function($obj) {
						}, // Function that each finished list element will pass through for extra
						// modification.
						above : 'auto', // If set to 'auto', menu will appear as a "dropup" if there
						// is not enough room below it. Settings to true will make
						// the menu a "<a
						// href="http://www.jqueryscript.net/tags.php?/popup/">popup</a>"
						// by default.
						preventDoubleContext : true, // If set to true, browser-based context
						// menus will not work on contextjs menus.
						compress : false
					// If set to true, context menus will have less padding, making them (hopefully)
					// more unobtrusive
					});
				}// end function

				if (listServer.length > 0) {
					check_server(0);
				}
				
				
				
			});

			