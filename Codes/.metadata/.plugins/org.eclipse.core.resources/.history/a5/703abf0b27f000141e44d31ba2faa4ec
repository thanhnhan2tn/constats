<%@page import="org.apache.velocity.runtime.directive.Foreach"%>
<%@page import="java.util.List"%>
<%@page import="model.dhcp.Subnet"%>
<%@page import="model.dhcp.DHCP"%>
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<%@page import="model.nic.Eth"%>
<%@page import="model.nic.Nic"%>
<aside class="right-side">
	<!-- Content Header (Page header) -->
	<section class="content-header">
		<h1>
			DHCP Server Config :<small> (${server.serverAddress})</small>
		</h1>
		<h2>Logs</h2>
		</section>
	<script>
	$(document)
	  .ajaxStart(function () {
	    $(".wait")
	      .css("display", "block");
	  });
	//loading ServerInfomation
	var ip = "${server.serverAddress}";
	$(document)
	  .ready(function () {
	    $.ajax({
	      url: '${pageContext.request.contextPath}/getlogs/' + ip + '/' + cc
	      , type: 'GET'
	      , data: {}, //timeout : 60000,
	      success: function (data, status) {
	        //if(data != null){
	        var html = '<table class="table table-bordered">';
	        html += '<tr><td>Hostname:</td><td>' + data.hostname + '</td></tr>';
	        html += '<tr><td>OS Version:</td><td>' + data.osversion + '</td></tr>';
	        html += '<tr><td>Kernel:</td><td>' + data.kernel + '</td></tr>';
	        html += '<tr><td>Processor Info:</td><td>' + data.processor_info + '</td></tr>';
	        html += '<tr><td>Uptime:</td><td>' + data.uptime + '</td></tr>';
	        html += '<tr><td>Memory:</td><td>Used: ' + parseInt(parseInt(data.memused) / 1024) + ' MB - Total: ' + parseInt(parseInt(data.memtotal) / 1024) + ' MB</td></tr>';
	        html += '<tr><td>CPU Usage:</td><td><div class="progress xs"><div class="progress-bar progress-bar-green" style="width: ' + data.cpu_usage + '%;"></div></div>' + data.cpu_usage + '%</td></tr>';
	        html += '<tr><td>Cpu Loadaverage:</td><td>' + data.cpu_loadaverage + '</td></tr></table>';
	        //	alert(html);
	        $(".serverinfomation")
	          .html(html);
	        $(".wait")
	          .css("display", "none");
	        //}
	      }
	    });
	    $("#m-status")
	      .on("click", function () {
	        //var id=""
	        if ($(this)
	          .is(":checked")) {
	          $.ajax({
	            url: '${pageContext.request.contextPath}/monitor/start/' + ip + '/' + cc
	            , type: 'GET'
	            , datastatus: {}
	          })
	        } else {
	          $.ajax({
	            url: '${pageContext.request.contextPath}/monitor/stop/' + ip + '/' + cc
	            , type: 'GET'
	            , datastatus: {}
	          })
	        }
	      });
	    $(".active-sudo")
	      .on("click", function () {
	        var user = $(".username")
	          .val();
	        var pass = $(".password")
	          .val();
	        $.ajax({
	          url: '${pageContext.request.contextPath}/serviceconfig/user/' + user + '/' + pass + '/' + ip + '/' + cc
	          , type: 'GET'
	          , datastatus: {}
	          , success: function (datastatus, status) {
	            location.reload();
	          }
	        });
	      });
	  });

	</script>
	<!--  End Content Header -->
	<!--  Main Content -->
	<section class="content">
		<div class="main-content">

			<div style="display: none ${display}" id="login-alert"
				class="alert alert-danger col-sm-12">${message}</div>
			<div style="display: none ${displaysuccess}" id="login-alert"
				class="alert alert-success col-sm-12">${message}</div>
			<div class="box box-default">
				<div class="box-body dhcp-logs">
					<span class="wait"
								style="display: none: text-align:center; margin: auto;"> <img
								src="<c:url value='/resources/themes/default/images/loading.gif'/>" />
					</span> 
				</div>
			</div>
		</div>
	</section>
	<!--  End Main Content -->
</aside>